# ุฅุตูุงุญ ูุดููุฉ ุฑูุน ุงูุตูุฑ ุงูุดุฎุตูุฉ - ุงูุฅุตุฏุงุฑ ุงููุญุฏุซ

## ๐ง ุงููุดููุฉ

**ุงูุฎุทุฃ:** `Converting circular structure to JSON`
- ูุญุฏุซ ุนูุฏ ูุญุงููุฉ ุญูุธ ุนุถู ุฌุฏูุฏ ูุน ุตูุฑุฉ ุดุฎุตูุฉ
- ุงููุดููุฉ ูู ุชูุฑูุฑ ูุงุฆู `File` ูุจุงุดุฑุฉ ุฅูู Supabase
- ูุงุฆู `File` ูุญุชูู ุนูู ูุฑุงุฌุน ุฏุงุฆุฑูุฉ ูุง ูููู ุชุญููููุง ุฅูู JSON

## ๐๏ธ ุงูุญู ุงููุญุฏุซ

### 1. ุชุญุฏูุซ `EditMemberModal.jsx`

**ุงููุดููุฉ:** ุชุฎุฒูู ูุงุฆู `File` ูุจุงุดุฑุฉ ูู ุงูุญุงูุฉ
```jsx
// ูุจู ุงูุฅุตูุงุญ
onChange((s) => ({ ...s, avatar: file }));
```

**ุงูุญู:** ุชุฎุฒูู ูุนูููุงุช ุงูููู ูุน ุฅูุดุงุก URL ูููุนุงููุฉ
```jsx
// ุจุนุฏ ุงูุฅุตูุงุญ
onChange((s) => ({ 
  ...s, 
  avatar_file: file,
  avatar_url: URL.createObjectURL(file) // Create preview URL
}));
```

### 2. ุชุญุฏูุซ `TeamDashboard.jsx`

**ุฅุถุงูุฉ ุชูุธูู ุงูุจูุงูุงุช ูู `handleAddMember`:**
```jsx
// ุชูุธูู ุงูุจูุงูุงุช ูู ุงููุฑุงุฌุน ุงูุฏุงุฆุฑูุฉ
const cleanData = { ...memberData };
delete cleanData.avatar;
delete cleanData.avatar_file;

// ุงูุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงููุทููุจุฉ
if (!cleanData.name) {
  throw new Error('ุงุณู ุงูุนุถู ูุทููุจ');
}

// ุฑูุน ุงูุตูุฑุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
let avatarUrl = memberData.avatar_url;
if (memberData.avatar_file) {
  const fileExt = memberData.avatar_file.name.split('.').pop();
  const fileName = `${Date.now()}.${fileExt}`;
  const { data: uploadData, error: uploadError } = await supabase.storage
    .from('team-avatars')
    .upload(fileName, memberData.avatar_file);

  if (uploadError) throw uploadError;
  avatarUrl = `https://zsshxpdgbnxfuszanaeo.supabase.co/storage/v1/object/public/team-avatars/${fileName}`;
}

// ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุจุดูู ููุธู
const insertData = {
  name: cleanData.name,
  role: cleanData.role || 'member',
  status: cleanData.status || 'active',
  email: cleanData.email || null,
  phone: cleanData.phone || null,
  avatar_url: avatarUrl || null,
  joined: cleanData.joined || new Date().toISOString().slice(0, 10),
  project_id: cleanData.project_id || null
};
```

### 3. ุชุญุฏูุซ `TeamMembersTab.jsx`

**ุชูุธูู ุงูุจูุงูุงุช ูุจู ุงูุญูุธ:**
```jsx
const handleSaveMember = async (memberData) => {
  try {
    // ุชูุธูู ุงูุจูุงูุงุช ูู ุงููุฑุงุฌุน ุงูุฏุงุฆุฑูุฉ
    const cleanData = { ...memberData };
    delete cleanData.avatar;
    delete cleanData.avatar_file;
    delete cleanData._showLinkInput;
    delete cleanData._newLink;
    
    if (editingMember.id) {
      await onUpdate(editingMember.id, cleanData);
    } else {
      await onAdd(cleanData);
    }
    setEditingMember(null);
  } catch (error) {
    console.error('Error saving member:', error);
    alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุนุถู');
  }
};
```

## ๐ ุชุฏูู ุงูุนูู ุงูุฌุฏูุฏ

### ุฅุถุงูุฉ ุนุถู ุฌุฏูุฏ ูุน ุตูุฑุฉ:
1. ุงููุณุชุฎุฏู ููุชุญ ููุฏุงู "ุฅุถุงูุฉ ุนุถู"
2. ูุฎุชุงุฑ ุตูุฑุฉ ุดุฎุตูุฉ
3. ุงููุธุงู ููุดุฆ URL ูุนุงููุฉ ููุตูุฑุฉ
4. ุนูุฏ ุงูุญูุธุ ุงููุธุงู:
   - ููุธู ุงูุจูุงูุงุช ูู ุงููุฑุงุฌุน ุงูุฏุงุฆุฑูุฉ
   - ูุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงููุทููุจุฉ
   - ูุฑูุน ุงูุตูุฑุฉ ุฅูู ูุฌูุฏ `team-avatars` ูู Supabase Storage
   - ูุญูุธ ุฑุงุจุท ุงูุตูุฑุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ูุนุฑุถ ุงูุนุถู ูุน ุตูุฑุชู

### ุชุญุฏูุซ ุนุถู ููุฌูุฏ:
1. ุงููุณุชุฎุฏู ููุชุญ ููุฏุงู "ุชุนุฏูู ุนุถู"
2. ูุฎุชุงุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ (ุงุฎุชูุงุฑู)
3. ุงููุธุงู ููุธู ุงูุจูุงูุงุช ููุฑูุน ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ
4. ูุญุฏุซ ุงูุนุถู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ฏ ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ

### 1. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ูู Console
- ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงููุทููุจุฉ
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุฑูุน ุงูุตูุฑ

### 2. ุชูุธูู ุงูุจูุงูุงุช
- ุฅุฒุงูุฉ ุงููุฑุงุฌุน ุงูุฏุงุฆุฑูุฉ
- ุชูุธูู ุงูุจูุงูุงุช ูุจู ุงูุฅุฏุฑุงุฌ
- ููู ุงูุชุฑุงุถูุฉ ููุญููู ุงููุทููุจุฉ

### 3. ุชุญุณูู ุงูุชุฎุฒูู
- ุงุณุชุฎุฏุงู ูุฌูุฏ `team-avatars` ุจุฏูุงู ูู `avatars`
- ุฃุณูุงุก ูุฑูุฏุฉ ููุตูุฑ ุจุงุณุชุฎุฏุงู timestamp
- URLs ูุจุงุดุฑุฉ ุจุฏูุงู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุฅูุดุงุก ูุฌูุฏ Storage:** ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ `team-avatars` ูู Supabase Storage
2. **ุงุฎุชุจุงุฑ ุฑูุน ุงูุตูุฑ:** ุงูุชุฃูุฏ ูู ุนูู ุฑูุน ุงูุตูุฑ ุจุดูู ุตุญูุญ
3. **ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ:** ุชุฌุฑุจุฉ ุชุญุฏูุซ ุตูุฑ ุงูุฃุนุถุงุก ุงูููุฌูุฏูู

## ๐ ููุงุญุธุงุช ูููุฉ

- ุงููุธุงู ุงูุขู ูุชุนุงูู ูุน ุฑูุน ุงูุตูุฑ ุจุดูู ุขูู
- ูุง ุชูุฌุฏ ูุฑุงุฌุน ุฏุงุฆุฑูุฉ ูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ
- ุงูุตูุฑ ุชูุฑูุน ุฅูู ูุฌูุฏ `team-avatars` ูู Supabase Storage
- ูุชู ุฅูุดุงุก ุฃุณูุงุก ูุฑูุฏุฉ ููุตูุฑ ุจุงุณุชุฎุฏุงู timestamp
- ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ูููุณุงุนุฏุฉ ูู ุงูุชุตุญูุญ

## ๐ง ุฅุนุฏุงุฏ Supabase Storage

ุฅุฐุง ูู ููู ูุฌูุฏ `team-avatars` ููุฌูุฏุ ูู ุจุฅูุดุงุฆู ูู Supabase Dashboard:

1. ุงุฐูุจ ุฅูู Storage ูู Supabase Dashboard
2. ุฃูุดุฆ bucket ุฌุฏูุฏ ุจุงุณู `team-avatars`
3. ุงุถุจุท ุงูุณูุงุณุงุช ููุณูุงุญ ุจุงูุฑูุน ูุงููุฑุงุกุฉ ุงูุนุงูุฉ
