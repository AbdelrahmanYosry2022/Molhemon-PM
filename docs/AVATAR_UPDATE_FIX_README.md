# ุฅุตูุงุญ ูุดููุฉ ุชุญุฏูุซ ุงูุตูุฑ ูู ุฅุฏุงุฑุฉ ุงููุฑูู

## ๐ง ุงููุดููุฉ

**ุงูุฎุทุฃ:** ุงูุตูุฑ ูุง ุชุชุญุฏุซ ุนูุฏ ุงูุชุนุฏูู
- ุนูุฏ ุชุนุฏูู ุตูุฑุฉ ุงูุนุถูุ ุงูุตูุฑุฉ ูุง ุชุชุบูุฑ
- ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ ุชุธูุฑ ุจุฏูุงู ูู ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ
- `avatar_file` ูุง ูุชู ุชูุฑูุฑู ุจุดูู ุตุญูุญ

## ๐๏ธ ุงูุญู

### 1. ุฅุตูุงุญ `handleSaveMember` ูู `TeamMembersTab.jsx`

**ุงููุดููุฉ:** ุญุฐู `avatar_file` ูุจู ุงูุชุญุฏูุซ
```jsx
// ูุจู ุงูุฅุตูุงุญ
const cleanData = { ...memberData };
delete cleanData.avatar_file; // ูุฐุง ูุญุฐู ูุนูููุงุช ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ
```

**ุงูุญู:** ุนุฏู ุญุฐู `avatar_file` ูุจู ุงูุชุญุฏูุซ
```jsx
// ุจุนุฏ ุงูุฅุตูุงุญ
const cleanData = { ...memberData };
delete cleanData.avatar;
// ูุง ูุญุฐู avatar_file ูุฃููุง ูุญุชุงุฌู ููุชุญุฏูุซ
delete cleanData._showLinkInput;
delete cleanData._newLink;
```

### 2. ุฅุตูุงุญ `handleUpdateMember` ูู `TeamDashboard.jsx`

**ุงููุดููุฉ:** ุญุฐู `avatar_file` ูุจู ุงุณุชุฎุฏุงูู
```jsx
// ูุจู ุงูุฅุตูุงุญ
const cleanUpdates = { ...updates };
delete cleanUpdates.avatar_file; // ูุฐุง ูุญุฐู ูุนูููุงุช ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ

// ุฑูุน ุงูุตูุฑุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
if (updates.avatar_file) { // updates.avatar_file ูุฏ ูููู undefined
  // ุฑูุน ุงูุตูุฑุฉ
}
```

**ุงูุญู:** ุงุณุชุฎุฏุงู `avatar_file` ูุจู ุญุฐูู
```jsx
// ุจุนุฏ ุงูุฅุตูุงุญ
const cleanUpdates = { ...updates };
delete cleanUpdates.avatar;
// ูุง ูุญุฐู avatar_file ูุฃููุง ูุญุชุงุฌู ูุฑูุน ุงูุตูุฑุฉ

// ุฑูุน ุงูุตูุฑุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
if (updates.avatar_file) {
  // ุฑูุน ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ
  avatarUrl = `https://...`;
} else if (updates.avatar_url && !updates.avatar_url.startsWith('blob:')) {
  // ุงุณุชุฎุฏุงู URL ููุฌูุฏ ุตุญูุญ
  avatarUrl = updates.avatar_url;
}

// ุงูุขู ูุญุฐู avatar_file ูู cleanUpdates ูุจู ุงูุญูุธ
delete cleanUpdates.avatar_file;
```

### 3. ุชุญุณูู ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงููุดููุฉ:** ุญูุธ `avatarUrl` ุญุชู ูู ูุงู `null`
```jsx
// ูุจู ุงูุฅุตูุงุญ
.update({ ...cleanUpdates, avatar_url: avatarUrl })
```

**ุงูุญู:** ุญูุธ `avatar_url` ููุท ุฅุฐุง ูุงู ููุงู ูููุฉ ุฌุฏูุฏุฉ
```jsx
// ุจุนุฏ ุงูุฅุตูุงุญ
const updateData = { ...cleanUpdates };
if (avatarUrl !== null) {
  updateData.avatar_url = avatarUrl;
}

.update(updateData)
```

### 4. ุชุญุณูู ุชุญุฏูุซ `teamMembers` ูู ุงูุฐุงูุฑุฉ

**ุงููุดููุฉ:** ุชุญุฏูุซ `avatar_url` ุญุชู ูู ูุงู `null`
```jsx
// ูุจู ุงูุฅุตูุงุญ
{ ...member, ...cleanUpdates, avatar_url: avatarUrl }
```

**ุงูุญู:** ุชุญุฏูุซ `avatar_url` ููุท ุฅุฐุง ูุงู ููุงู ูููุฉ ุฌุฏูุฏุฉ
```jsx
// ุจุนุฏ ุงูุฅุตูุงุญ
{ 
  ...member, 
  ...cleanUpdates, 
  ...(avatarUrl !== null && { avatar_url: avatarUrl })
}
```

## ๐ ุชุฏูู ุงูุนูู ุงูุฌุฏูุฏ

### ุชุญุฏูุซ ุตูุฑุฉ ุงูุนุถู:
1. ุงููุณุชุฎุฏู ููุชุญ ููุฏุงู ุงูุชุนุฏูู
2. ูุฎุชุงุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ
3. `EditMemberModal` ูุญูุธ `avatar_file`
4. ุนูุฏ ุงูุญูุธุ `handleSaveMember` ููุฑุฑ `avatar_file`
5. `handleUpdateMember` ูุฑูุน ุงูุตูุฑุฉ ุงูุฌุฏูุฏุฉ ุฅูู Supabase Storage
6. ูุชู ุญูุธ URL ุงูุตูุฑุฉ ุงูุฌุฏูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
7. ุงูุนุถู ูุธูุฑ ูุน ุตูุฑุชู ุงูุฌุฏูุฏุฉ

### ุนุฏู ุชุบููุฑ ุงูุตูุฑุฉ:
1. ุงููุณุชุฎุฏู ููุชุญ ููุฏุงู ุงูุชุนุฏูู
2. ูุง ูุฎุชุงุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ
3. `handleUpdateMember` ูุญุชูุธ ุจุงูุตูุฑุฉ ุงูููุฌูุฏุฉ
4. ูุง ูุชู ุชุญุฏูุซ `avatar_url` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ฏ ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ

### 1. ุชูุฑูุฑ ุตุญูุญ ููุจูุงูุงุช
- `avatar_file` ูุง ูุชู ุญุฐูู ูุจู ุงูุชุญุฏูุซ
- ูุนูููุงุช ุงูุตูุฑุฉ ุชูุฑุฑ ุจุดูู ุตุญูุญ
- ุชุชุจุน ููุตู ููุจูุงูุงุช

### 2. ุญูุธ ุฐูู ููุตูุฑ
- ุชุญุฏูุซ `avatar_url` ููุท ุนูุฏ ุงูุญุงุฌุฉ
- ุงูุญูุงุธ ุนูู ุงูุตูุฑ ุงูููุฌูุฏุฉ
- ููุน ููุฏุงู ุงูุตูุฑ

### 3. ุชุชุจุน ุฃูุถู ููุนูููุงุช
- ุฑุณุงุฆู console ููุตูุฉ
- ูุนุฑูุฉ ูุชู ูุชู ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ
- ูุนุฑูุฉ ูุชู ูุชู ุงูุงุญุชูุงุธ ุจุตูุฑุฉ ููุฌูุฏุฉ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงูุตูุฑุฉ:** ุงูุชุฃูุฏ ูู ุชุบููุฑ ุงูุตูุฑุฉ
2. **ุงุฎุชุจุงุฑ ุนุฏู ุชุบููุฑ ุงูุตูุฑุฉ:** ุงูุชุฃูุฏ ูู ุงูุญูุงุธ ุนูู ุงูุตูุฑุฉ ุงูููุฌูุฏุฉ
3. **ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงูุชุญููู:** ุงูุชุฃูุฏ ูู ุงุณุชูุฑุงุฑ ุธููุฑ ุงูุตูุฑ

## ๐ ููุงุญุธุงุช ูููุฉ

- ุงูุขู ูุชู ุชูุฑูุฑ `avatar_file` ุจุดูู ุตุญูุญ
- ุงูุตูุฑ ุงูุฌุฏูุฏุฉ ุชูุฑูุน ุฅูู Supabase Storage
- ุงูุตูุฑ ุงูููุฌูุฏุฉ ูุง ุชูููุฏ ุนูุฏ ุงูุชุนุฏูู
- `avatar_url` ููุญุฏุซ ููุท ุนูุฏ ุงูุญุงุฌุฉ

## ๐ง ููููุฉ ุนูู ุงูุชุญุฏูุซ

```jsx
// ูุญุต ูุฌูุฏ ุตูุฑุฉ ุฌุฏูุฏุฉ
if (updates.avatar_file) {
  // ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ
  avatarUrl = uploadToSupabase(updates.avatar_file);
} else if (updates.avatar_url && !updates.avatar_url.startsWith('blob:')) {
  // ุงุณุชุฎุฏุงู ุตูุฑุฉ ููุฌูุฏุฉ
  avatarUrl = updates.avatar_url;
}

// ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
if (avatarUrl !== null) {
  updateData.avatar_url = avatarUrl;
}
```
